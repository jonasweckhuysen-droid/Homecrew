<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Homecrew ‚Äì Agenda</title>
<link rel="stylesheet" href="style.css">
<style>
  .app-body { padding:10px; }
  .card { background:#fff; padding:12px; margin:12px 0; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.08); }
  ul.event-list { padding:0; margin:0; }
  .event-item { list-style:none; padding:10px; margin-bottom:8px; border-left:6px solid #3498db; background:#fbfbfb; border-radius:6px; }
  .google-event { border-left-color:#222; }
  .event-meta { font-size:0.85em; color:#666; margin-top:4px; }
  .event-user { font-weight:600; margin-top:6px; }
  input, textarea { width:100%; padding:8px; margin:6px 0; box-sizing:border-box; border-radius:6px; border:1px solid #ddd; }
  .nav-btn { padding:8px 12px; border-radius:8px; background:#3a6ea5; color:white; border:none; cursor:pointer; }
</style>
</head>
<body class="app-body">

<header class="header">
  <div class="header-left">
    <button onclick="window.location.href='dashboard.html'" class="nav-btn">üè† Home</button>
  </div>
  <div class="header-center"><h2>üìÖ Homecrew Agenda</h2></div>
  <div class="header-right"><button onclick="logout()" class="nav-btn">üö™ Uitloggen</button></div>
</header>

<main class="content">
  <h3 id="welcomeUser"></h3>

  <div class="card">
    <h4>Nieuwe afspraak toevoegen</h4>
    <input type="text" id="eventTitle" placeholder="Titel">
    <input type="datetime-local" id="eventDate">
    <textarea id="eventDescription" placeholder="Beschrijving (optioneel)"></textarea>
    <button class="nav-btn" onclick="addLocalEvent()">Toevoegen</button>
  </div>

  <div class="card">
    <h4>üìå Afspraak overzicht</h4>
    <ul id="eventList" class="event-list"></ul>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/ical.js@1.4.0/build/ical.min.js"></script>
<script src="agenda.js"></script>

<script>
// ====== USER LOGICA ======
const user = localStorage.getItem("homecrewUser") || sessionStorage.getItem("homecrewUser");
if (!user) window.location.href = "index.html";
document.getElementById("welcomeUser").innerText = "Welkom, " + user + " üëã";

function logout(){
  localStorage.clear();
  sessionStorage.clear();
  location.href = "index.html";
}

function getUserColor(u){
  if (!u) return "#999";
  const s = u.toLowerCase();
  if (s === "jonas") return "#3498db";
  if (s === "liese") return "#e74c3c";
  if (s === "loreana") return "#ff69b4";
  return "#777";
}

// ====== LOKAAL TOEVOEGEN ======
function addLocalEvent(){
  const title = document.getElementById("eventTitle").value.trim();
  const date = document.getElementById("eventDate").value;
  const desc = document.getElementById("eventDescription").value.trim();

  if (!title || !date) { alert("Titel en datum zijn verplicht"); return; }

  const events = JSON.parse(localStorage.getItem("homecrewLocalEvents") || "[]");
  events.push({ user, title, date, description: desc });
  localStorage.setItem("homecrewLocalEvents", JSON.stringify(events));

  document.getElementById("eventTitle").value = "";
  document.getElementById("eventDate").value = "";
  document.getElementById("eventDescription").value = "";

  loadEvents();
}
</script>

</body>
</html>
